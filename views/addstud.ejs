<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add user </title>
    <link rel="stylesheet" href="/css/addstud.css">
        <link rel="stylesheet" href="/css/navSide.css">
</head>
<body>
    <%-include("adminNav.ejs")%>
    <div class="container-fluid px-0">
  <div class="row g-0 high">

    <div class="col-2 p-0">
      <%- include("aside.ejs") %>
    </div>
    <div class="col-10">

 <div class="container mt-3 w-50">
  <div class="card border shadow p-3">
    <h2 class="mb-4 text-center">Add User</h2>
    <form action="/stduser" method="POST">
      <div class="row g-3">
        <div class="col-md-10 w-100">
          <label for="name" class="form-label"> Name</label>
          <input type="text" id="name" name="name" class="form-control" placeholder="Enter Name" required >
          <div id="nameError" style="color: red; font-size: 0.9em;"></div>
        </div>

        <div class="col-md-10 w-100">
          <label for="phone" class="form-label">Contact</label>
          <input type="text" id="phone" name="phone" class="form-control" placeholder="Enter Phone Number " required >
        <div id="phoneError" style="color: red; font-size: 0.9em;"></div>
        </div>

        <div class="col-md-10  w-100">
          <label for="email" class="form-label">Email</label>
          <input type="email" id="email" name="email" class="form-control" placeholder="Enter Email" required>
          <div id="emailError" style="color: red; font-size: 0.9em;"></div>
        </div>

        <div class="col-md-10  w-100">
          <label for="password" class="form-label">Password</label>
          <input type="password" id="password" name="password" class="form-control" placeholder="Password" required >
          <div id="passwordError" style="color: red; font-size: 0.9em;"></div>
        </div>

        <div class="col-md-10  w-100">
          <label for="role" class="form-label">Role</label>
          <select id="role" name="role" class="form-select" required>
            <option value="" disabled selected>Select Role</option>
            <option value="member">Member</option>
          </select>
        </div>

        <div class="col-12 text-center mt-4">
          <button type="submit" class="btn btn-primary px-5" disabled>Submit</button>
        </div>

        <% if (msg) { %>
          <div class="col-12">
            <div class="alert alert-info text-center mt-3"><%= msg %></div>
          </div>
        <% } %>
      </div>
    </form>
  </div>
</div>


</div>

        </div>
</div>

<script>
  const nameInput = document.getElementById('name');
  const phoneInput = document.getElementById('phone');
  const emailInput = document.getElementById('email');
  const passwordInput = document.getElementById('password');
  const submitBtn = document.getElementById('submitBtn');

  const nameError = document.getElementById('nameError');
  const phoneError = document.getElementById('phoneError');
  const emailError = document.getElementById('emailError');
  const passError = document.getElementById('passwordError');

  const patterns = {
    name: /^[A-Za-z\s]{2,50}$/,
    phone: /^\d{10,12}$/,
    password: /^.{6,}$/
  };

  function validateField(value, pattern) {
    return pattern.test(value.trim());
  }

  function validateForm() {
    const isNameValid = validateField(nameInput.value, patterns.name);
    const isPhoneValid = validateField(phoneInput.value, patterns.phone);
    const isPasswordValid = validateField(passwordInput.value, patterns.passordword);
    const isEmailValid = emailInput.value.trim() !== ""; // Basic required, HTML5 validates format

    // Name error
    nameError.textContent = isNameValid ? "" : "Name must be 2â€“50 letters/spaces only.";
    // Phone error
    phoneError.textContent = isPhoneValid ? "" : "Phone must be 10 digits.";
    // Password error
    passError.textContent = isPasswordValid ? "" : "Password must be at least 6 characters long.";
    // Email error
    emailError.textContent = isEmailValid ? "" : "Please enter a valid email address.";
    
    // Enable/disable the submit button
    submitBtn.disabled = !(isNameValid && isPhoneValid && isEmailValid && isPasswordValid);
  }

  [nameInput, phoneInput, emailInput, passwordInput].forEach(input => {
    input.addEventListener('input', validateForm);
  });
</script>

</body>
</html>