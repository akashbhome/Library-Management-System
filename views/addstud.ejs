<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add user </title>
    <link rel="stylesheet" href="/css/addstud.css">
        <link rel="stylesheet" href="/css/navSide.css">
</head>
<body>
    <%-include("adminNav.ejs")%>
    <div class="container-fluid px-0">
  <div class="row g-0 high">

    <div class="col-2 p-0">
      <%- include("aside.ejs") %>
    </div>
    <div class="col-10">

 <div class="container mt-3 w-50">
  <div class="card border shadow p-3">
    <h2 class="mb-4 text-center">Add User</h2>
    <form action="/stduser" method="POST">
      <div class="row g-3">
        <div class="col-md-10 w-100">
          <label for="name" class="form-label"> Name</label>
          <input type="text" id="name" name="name" class="form-control" placeholder="Enter Name" required >
          <div id="nameError" style="color: red; font-size: 0.9em;"></div>
        </div>

        <div class="col-md-10 w-100">
          <label for="phone" class="form-label">Contact</label>
          <input type="text" id="phone" name="phone" class="form-control" placeholder="Enter Phone Number " required >
        <div id="phoneError" style="color: red; font-size: 0.9em;"></div>
        </div>

        <div class="col-md-10  w-100">
          <label for="email" class="form-label">Email</label>
          <input type="email" id="email" name="email" class="form-control" placeholder="Enter Email" required>
          <div id="emailError" style="color: red; font-size: 0.9em;"></div>
        </div>

        <div class="col-md-10  w-100">
          <label for="password" class="form-label">Password</label>
          <input type="password" id="password" name="password" class="form-control" placeholder="Password" required >
          <div id="passwordError" style="color: red; font-size: 0.9em;"></div>
        </div>

        <div class="col-md-10  w-100">
          <label for="role" class="form-label">Role</label>
          <select id="role" name="role" class="form-select" required>
            <option value="" disabled selected>Select Role</option>
            <option value="member">Member</option>
          </select>
        </div>

        <div class="col-12 text-center mt-4">
          <button type="submit" class="btn btn-primary px-5" disabled>Submit</button>
        </div>

        <% if (msg) { %>
          <div class="col-12">
            <div class="alert alert-info text-center mt-3"><%= msg %></div>
          </div>
        <% } %>
      </div>
    </form>
  </div>
</div>


</div>

        </div>
</div>

<script>
  //name
  const nameInput = document.getElementById('name');
  const nameError = document.getElementById('nameError');

  nameInput.addEventListener('input', function () {
    const nameValue = nameInput.value.trim();
    const onlyLetters = /^[A-Za-z ]+$/;

    if (!onlyLetters.test(nameValue)) {
      nameError.textContent = "Only letters and spaces are allowed.";
      nameInput.setCustomValidity("Invalid");
    } else {
      nameError.textContent = "";
      nameInput.setCustomValidity("");
    }
  });

  //phone number
  const phoneInput = document.getElementById('phone');
  const phoneError = document.getElementById('phoneError');

  phoneInput.addEventListener('input', () => {
    const phoneValue = phoneInput.value.trim();
    const onlyDigits = /^[0-9]{10}$/;

    if (!onlyDigits.test(phoneValue)) {
      phoneError.textContent = "Phone number must be exactly 10 digits.";
      phoneInput.setCustomValidity("Invalid");
    } else {
      phoneError.textContent = "";
      phoneInput.setCustomValidity("");
    }
  });

  //Gmail
  const emailInput = document.getElementById('email');
  const emailError = document.getElementById('emailError');

  emailInput.addEventListener('input', () => {
    const emailValue = emailInput.value.trim().toLowerCase();

    if (!emailValue.endsWith('@gmail.com')) {
      emailError.textContent = "Invalid Email";
      emailInput.setCustomValidity("Invalid");
    } else {
      emailError.textContent = "";
      emailInput.setCustomValidity("");
    }
  });
  
  //password
    const passwordInput = document.getElementById('password');
  const passwordError = document.getElementById('passwordError');

  passwordInput.addEventListener('input', () => {
    const passwordValue = passwordInput.value.trim();

    if (passwordValue.length < 5) {
      passwordError.textContent = "Password must be at least 5 characters.";
      passwordInput.setCustomValidity("Invalid");
    } else {
      passwordError.textContent = "";
      passwordInput.setCustomValidity("");
    }
  });
</script>

</body>
</html>